<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    
    <!-- Lottie Player ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>

    <style>
        /* --- ê¸°ë³¸ ì„¤ì • --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background-color: #0a0a0a; color: #fff; font-family: sans-serif; overflow-x: hidden; }
        a { color: inherit; text-decoration: none; }

        section { width: 100%; display: flex; flex-direction: column; align-items: center; position: relative; }
        
        #hero { 
            height: 100svh; 
            background-color: #505050; /* ì´ˆê¸° ë°°ê²½ìƒ‰ */
            justify-content: center; 
            z-index: 10;
            gap: 1.5rem; 
            position: relative;
            overflow: hidden; /* ìº”ë²„ìŠ¤ ì˜¤ë²„í”Œë¡œìš° ë°©ì§€ */
        }
        
        /* ë¹„ ë‚´ë¦¬ëŠ” íš¨ê³¼ ìº”ë²„ìŠ¤ (ë°°ê²½) */
        #rain-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1; /* ë°°ê²½ ë°”ë¡œ ìœ„ */
            pointer-events: none;
        }

        /* ë¡œí‹° ë° í…ìŠ¤íŠ¸ëŠ” ìº”ë²„ìŠ¤ ìœ„ì— ìœ„ì¹˜ */
        #hero lottie-player, #hero h1, #hero p {
            position: relative;
            z-index: 10;
        }

        /* ë¡œí‹° í”Œë ˆì´ì–´ ìŠ¤íƒ€ì¼ (í¬ê¸° 2ë°°ë¡œ ìˆ˜ì •ë¨) */
        #hero lottie-player {
            width: 600px;
            height: 600px;
            max-width: 80vw; 
            max-height: 80vw;
        }

        /* -------------------------------------------
            About Me ì„¹ì…˜ ìŠ¤íƒ€ì¼
            ------------------------------------------- */
        #about { 
            height: 100svh; 
            width: 100%;
            background: #000; 
            position: relative; 
            overflow: hidden; 
            z-index: 15; 
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0;
        }

        /* ë°°ê²½ ì‹¤ íš¨ê³¼ ìŠ¤íƒ€ì¼ */
        .about-strings {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 1;
            pointer-events: none;
        }
        
        .about-string {
            position: absolute; 
            top: 0;
            width: 1px; 
            height: 100%;
            transform: scaleY(0); 
            transform-origin: top; 
            transition: transform 1.5s cubic-bezier(0.22, 1, 0.36, 1);
        }

        /* ì½˜í…ì¸  ë˜í¼ */
        .about-content {
            position: relative; z-index: 2;
            width: 90%; max-width: 1200px; height: 80%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4rem; 
        }

        /* ì™¼ìª½: ì‚¬ì§„ ì˜ì—­ */
        .about-photo {
            flex: 1;
            height: 100%;
            max-height: 600px;
            display: flex;
            justify-content: center;
            align-items: center;
            
            opacity: 0;
            transform: translateY(-100px); 
            transition: all 1s ease;
            transition-delay: 0.5s; 
        }
        .about-photo img {
            width: 100%; height: 100%; object-fit: cover; 
            border-radius: 12px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* ì˜¤ë¥¸ìª½: í…ìŠ¤íŠ¸ ì˜ì—­ */
        .about-text {
            flex: 1;
            text-align: left;
            
            opacity: 0;
            transform: translateY(-100px); 
            transition: all 1s ease;
            transition-delay: 0.7s; 
        }
        .about-text h2 { font-size: 3rem; margin-bottom: 1.5rem; font-weight: bold; color: #fff; }
        .about-text p { font-size: 1.1rem; line-height: 1.8; color: #ccc; margin-bottom: 1rem; }

        /* [í™œì„±í™” ìƒíƒœ] Trigger í´ë˜ìŠ¤ */
        .about-content.content-active .about-photo,
        .about-content.content-active .about-text {
            opacity: 1;
            transform: translateY(0);
        }

        /* ì‹¤ ì• ë‹ˆë©”ì´ì…˜ í™œì„±í™” (ë¶€ëª¨ì¸ #aboutì— í´ë˜ìŠ¤ ì¶”ê°€ ì˜ˆì •) */
        #about.strings-active .about-string {
            transform: scaleY(1);
        }
        
        /* ì‹¤ë§ˆë‹¤ ë”œë ˆì´ë¥¼ ì£¼ì–´ ë¶ˆê·œì¹™í•˜ê²Œ ë‚´ë ¤ì˜¤ê²Œ í•¨ */
        #about.strings-active .about-string:nth-child(1) { transition-delay: 0.1s; }
        #about.strings-active .about-string:nth-child(2) { transition-delay: 0.3s; }
        #about.strings-active .about-string:nth-child(3) { transition-delay: 0.0s; }
        #about.strings-active .about-string:nth-child(4) { transition-delay: 0.4s; }
        #about.strings-active .about-string:nth-child(5) { transition-delay: 0.2s; }

        /* -------------------------------------------
            ğŸ“± ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ (About)
            ------------------------------------------- */
        @media (max-width: 768px) {
            .about-content {
                flex-direction: column; 
                gap: 2rem;
                height: auto;
                padding: 50px 0;
            }

            .about-photo {
                width: 100%;
                height: 40vh; 
                transform: translateY(-50px); 
            }

            .about-text {
                width: 100%;
                text-align: center; 
                transform: translateY(-50px); 
                padding: 0 1rem;
            }
            .about-text h2 { font-size: 2rem; margin-bottom: 1rem; }
            .about-text p { font-size: 0.95rem; line-height: 1.6; }

            .about-content.content-active .about-photo,
            .about-content.content-active .about-text {
                transform: translateY(0);
            }
        }


        /* í”„ë¡œì íŠ¸ ìŠ¤í…Œì´ì§€ (Pinned) */
        #stage {
            height: 100svh; 
            width: 100%;
            background-color: #000;
            overflow: hidden; 
            position: relative;
            perspective: 1000px;
            z-index: 15; 
        }

        /* ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ */
        #gallery-stage {
            height: 100svh; 
            width: 100%;
            position: relative;
            overflow: hidden;
            display: flex;
            /* flex-direction: column ì œê±°í•˜ì—¬ ì¤‘ì•™ ì •ë ¬ ìœ ì§€, íƒ€ì´í‹€ì€ absoluteë¡œ ì²˜ë¦¬ */
            justify-content: center;
            align-items: center;
            background: #000;
            z-index: 20;
            padding: 50px 20px; 
        }

        /* ë°°ê²½ (ì´ë¯¸ì§€) */
        .gallery-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;
        }
        .gallery-bg img {
            width: 100%; height: 100%; object-fit: cover; 
        }
        .gallery-bg .overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.7); backdrop-filter: blur(5px);
        }

        /* [NEW] ê°¤ëŸ¬ë¦¬ íƒ€ì´í‹€ ìŠ¤íƒ€ì¼ (absoluteë¡œ ìƒë‹¨ ë°°ì¹˜) */
        .gallery-title {
            position: absolute; 
            top: 50px; /* ìƒë‹¨ ì—¬ë°± */
            left: 50%;
            transform: translateX(-50%);
            z-index: 2;
            font-size: 3rem; 
            font-weight: bold; 
            color: #fff; 
            margin-bottom: 0;
            text-align: center;
        }

        /* í…ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ */
        .gallery-content {
            position: relative; z-index: 2; display: grid; 
            grid-template-columns: repeat(5, 1fr); 
            gap: 1.5rem;
            max-width: 1200px;
            width: 100%;
        }

        /* ì¸ë„¤ì¼/í”¼ë“œ ìŠ¤íƒ€ì¼ */
        .word-item {
            cursor: pointer;
            background-color: #1a1a1a; 
            /* border ëŒ€ì‹  inset box-shadow ì‚¬ìš© (ì•ˆìª½ ìŠ¤íŠ¸ë¡œí¬) */
            border: none;
            box-shadow: inset 0 0 0 2px rgba(255, 255, 255, 0.1);

            border-radius: 8px;
            overflow: hidden;
            
            position: relative;
            text-align: center;
            
            opacity: 0; 
            transform: translateY(100px) scale(0.9);
            
            /* border-color ëŒ€ì‹  box-shadow íŠ¸ëœì§€ì…˜ ì ìš© */
            transition: transform 0.3s ease, box-shadow 0.2s ease-out; 
            will-change: transform, opacity;

            pointer-events: none;
        }
        
        /* ê°€ìƒ ìš”ì†Œë¥¼ ì´ìš©í•œ ì™„ë²½í•œ ì•ˆìª½ í…Œë‘ë¦¬ êµ¬í˜„ */
        .word-item::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            pointer-events: none; 
            z-index: 10; 
            transition: border-color 0.2s ease-out;
        }
        
        .word-item.interaction-ready {
            pointer-events: auto;
        }
        
        .word-item.is-active {
            opacity: 1;
            transform: translateY(0) scale(1);
            transition: transform 1.2s cubic-bezier(0.23, 1, 0.32, 1), 
                        opacity 1.2s ease-out, 
                        box-shadow 0.2s ease-out;
            transition-delay: var(--item-delay);
        }
        
        /* í˜¸ë²„ ì‹œ í…Œë‘ë¦¬ ìƒ‰ìƒ ë³€ê²½ */
        .word-item:hover::after {
            border-color: var(--hover-border-color, rgba(255, 255, 255, 0.5)); 
        }

        .word-item:hover { 
            transform: scale(1.02); 
            box-shadow: none;
        }

        .thumbnail-img {
            width: 100%;
            height: auto;
            object-fit: cover;
            aspect-ratio: 16/10; 
            display: block;
            transition: opacity 0.3s ease;
        }
        .word-item:hover .thumbnail-img {
            opacity: 0.7;
        }

        .thumbnail-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            padding: 0.5rem 0.5rem;
            font-size: 1rem;
            font-weight: normal; 
            color: #fff; 
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            transition: background-color 0.2s ease, color 0.2s ease;
            z-index: 11; 
        }
        
        /* í˜¸ë²„ ì‹œ ìº¡ì…˜ ë°°ê²½ ë° ê¸€ììƒ‰ ë³€ê²½ */
        .word-item:hover .thumbnail-caption {
            background-color: var(--hover-color, rgba(255, 255, 255, 0.8));
            color: #333; 
        }
        
        .modal-enter { opacity: 0; transform: scale(0.9); }
        .modal-enter-active { opacity: 1; transform: scale(1); transition: opacity 0.3s ease-out, transform 0.3s ease-out; }

        @media (max-width: 1024px) {
            .gallery-content { grid-template-columns: repeat(4, 1fr); }
            .thumbnail-caption { font-size: 0.9rem; }
            /* íƒœë¸”ë¦¿ ì´í•˜ì—ì„œ íƒ€ì´í‹€ ìˆ¨ê¹€ */
            .gallery-title { display: none; }
        }
        @media (max-width: 768px) {
            .gallery-content { grid-template-columns: repeat(3, 1fr); gap: 1rem; }
            .thumbnail-caption { font-size: 0.8rem; padding: 0.4rem; }
            /* ëª¨ë°”ì¼ì—ì„œë„ ìˆ¨ê¹€ */
            .gallery-title { display: none; }
        }
        @media (max-width: 480px) {
            .gallery-content { grid-template-columns: repeat(2, 1fr); gap: 0.75rem; }
            .thumbnail-caption { font-size: 0.7rem; padding: 0.3rem; }
        }

        /* -------------------------------------------
            ë³´ë„ˆìŠ¤ ì„¹ì…˜ ìŠ¤íƒ€ì¼ (ìˆ˜ì •ë¨)
            ------------------------------------------- */
        #bonus {
            width: 100%;
            /* í™”ë©´ ê°€ë“ ì±„ì›€ -> 450pxë¡œ ë³€ê²½ (ìˆ˜ì •ë¨) */
            height: 450px;
            /* ìš”ì²­í•œ ë°°ê²½ìƒ‰ */
            background-color: #70794B; 
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0; 
            z-index: 25;
            position: relative;
            overflow: hidden;
        }

        /* ë°°ê²½ ë¹„ë””ì˜¤ ìŠ¤íƒ€ì¼ */
        .bonus-bg-video {
            position: absolute;
            bottom: 0; /* ë°”í…€ ê³ ì • */
            left: 0;
            width: 100%; /* ê°€ë¡œ ë§ì¶¤ */
            height: auto; /* ë†’ì´ ì˜¤í†  (ë¹„ìœ¨ ìœ ì§€) */
            object-fit: cover; /* í•„ìš” ì‹œ ê½‰ ì°¨ê²Œ */
            z-index: 0;
        }

        /* ì½˜í…ì¸  ë˜í¼ */
        .bonus-content {
            position: relative;
            z-index: 2; /* ì˜ìƒë³´ë‹¤ ìœ„ì— í‘œì‹œ */
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* ë ˆíŠ¸ë¡œ í”½ì…€ ì•„íŠ¸ ìŠ¤íƒ€ì¼ ë²„íŠ¼ */
        .bonus-btn {
            display: inline-block;
            padding: 16px 50px;
            background-color: #FFB347; 
            color: #fff;
            font-weight: bold;
            font-size: 1.2rem;
            text-decoration: none;
            border: 4px solid #4A332A; 
            border-radius: 0px; 
            box-shadow: 0px 6px 0px #4A332A; 
            transition: transform 0.1s, box-shadow 0.1s, background-color 0.2s;
        }

        .bonus-btn:hover {
            background-color: #FFC06E; 
            transform: translateY(2px); 
            box-shadow: 0px 4px 0px #4A332A; 
        }

        .bonus-btn:active {
            transform: translateY(6px); 
            box-shadow: none; 
        }

        /* ğŸ“± ëª¨ë°”ì¼ ëŒ€ì‘ (ë³´ë„ˆìŠ¤ ì„¹ì…˜) */
        @media (max-width: 768px) {
            .bonus-btn {
                padding: 15px 35px;
                font-size: 1rem;
            }
        }


        footer { height: 50vh; background: #050505; justify-content: center; display: flex; align-items: center; z-index: 10; }

        /* -------------------------------------------
            Marionette & Bubble Styles
            ------------------------------------------- */
        .marionette-group {
            position: absolute; top: 0; left: 50%; width: 2px; height: 100vh; pointer-events: none; will-change: transform, opacity, filter; z-index: 5; opacity: 0; visibility: hidden; 
        }

        .pendulum { position: absolute; top: 0; left: 0; width: auto; display: flex; flex-direction: column; align-items: center; transform-origin: center top; }
        .string-rack { position: relative; width: 100%; }
        .string { position: absolute; top: 0; height: 100%; width: 1px; background: rgba(255, 255, 255, 0.3); }

        .mockup-wrapper { position: relative; z-index: 2; margin-top: 0; }
        .mockup-img { display: block; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.7); object-fit: contain; }
        
        .p1 .mockup-img { width: 500px; height: auto; }
        .p2 .mockup-img { width: 300px; height: auto; }

        .info-bubbles { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 90vw; max-width: 1000px; height: 600px; pointer-events: none; z-index: 10; }
        .bubble { position: absolute; background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 16px; padding: 15px 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-width: 250px; opacity: 0; visibility: hidden; transition: transform 0.3s ease, background 0.3s ease; }
        a.bubble { pointer-events: auto; cursor: pointer; font-weight: bold; display: flex; align-items: center; justify-content: center; }
        a.bubble:hover { background: rgba(255, 255, 255, 0.2); transform: translateY(-3px); }
        .bubble h3 { font-size: 1.1rem; margin-bottom: 8px; color: #fff; }
        .bubble p { font-size: 0.9rem; line-height: 1.5; color: #ddd; margin: 0; }
        
        .b-top-left { top: 10%; left: 0; }
        .b-top-right { top: 10%; right: 0; text-align: right; }
        .b-bottom-left { bottom: 15%; left: 20px; }
        .b-bottom-right { bottom: 15%; right: 20px; }


        /* -------------------------------------------
            ğŸ“± ëª¨ë°”ì¼ ìŠ¤íƒ€ì¼ ì˜¤ë²„ë¼ì´ë“œ 
            ------------------------------------------- */
        @media (max-width: 768px) {
            .marionette-group {
                position: absolute; left: 0; top: 0; 
                width: 100% !important; 
                height: 100vh;
                padding: 0;
            }

            .pendulum { 
                position: relative; 
                width: 100%; 
                height: 100%; 
                display: block; 
            }

            /* ì´ë¯¸ì§€ ìƒë‹¨ ê³ ì • */
            .mockup-wrapper { 
                position: absolute;
                top: 20%; 
                left: 50%;
                transform: translateX(-50%);
                width: 100%;
                display: flex;
                justify-content: center;
                margin-top: 0;
                z-index: 5;
            }

            .p1 .mockup-img, .p2 .mockup-img { 
                width: auto; 
                max-width: 80vw; 
                max-height: 40vh; 
                object-fit: contain; 
            }

            /* ë²„íŠ¼ í•˜ë‹¨ ê³ ì • */
            .info-bubbles { 
                position: absolute; 
                top: auto !important; 
                bottom: 15% !important; 
                left: 50% !important;
                transform: translateX(-50%) !important;
                
                width: 90vw; 
                height: auto; 
                margin: 0;
                padding: 0;
                
                display: flex; 
                flex-direction: column; 
                gap: 10px; 
                align-items: center; 
                z-index: 10;
            }

            .bubble { 
                position: relative !important; 
                top: auto !important; left: auto !important; right: auto !important; bottom: auto !important; 
                width: 100%; 
                max-width: 320px; 
                text-align: center; 
                padding: 12px 15px; 
            }
            
            .b-top-right { text-align: center; }
            .info-bubbles .bubble:nth-child(n+2) { display: flex; align-items: center; justify-content: center; min-height: 50px; }

            /* ì¤„(String) */
            .string-rack { 
                position: absolute; 
                top: 0; 
                left: 50%;
                transform: translateX(-50%);
                z-index: 0; 
                opacity: 0.5; 
                height: 50vh !important; 
            }
        }

    </style>
</head>
<body>

    <!-- Hero ì„¹ì…˜: ìº”ë²„ìŠ¤ ì¶”ê°€ -->
    <section id="hero">
        <canvas id="rain-canvas"></canvas>
        <lottie-player 
            src="/img/ani.json" 
            background="transparent" 
            speed="1" 
            loop 
            autoplay>
        </lottie-player>
        <!-- í…ìŠ¤íŠ¸ ì‚­ì œë¨ -->
    </section>
    
    <!-- About Me ì„¹ì…˜ -->
    <section id="about">
        <!-- [NEW] ë°°ê²½ ì‹¤ íš¨ê³¼ ìš”ì†Œ (JSë¡œ ìƒì„±ë¨) -->
        <div class="about-strings"></div>

        <!-- [ì‚­ì œë¨] ë°°ê²½ ì´ë¯¸ì§€ div ì‚­ì œ -->
        
        <div class="about-content">
            <div class="about-photo">
                <img src="/img/about.JPG" onerror="this.src='https://placehold.co/400x600/111/fff?text=Profile+Image'" alt="Profile">
            </div>
            <div class="about-text">
                <h2>About Me </h2>
                <p>
                    ì•ˆë…•í•˜ì„¸ìš”.<br>
                    ë‹¤ì–‘í•œ íˆ´ì„ ì¡°ì¢…í•˜ê³ <br>
                    ì•„ì´ë””ì–´ë“¤ì„ ì—°ê²°í•˜ì—¬<br>
                    ì°½ì˜ì ì¸ ê²°ê³¼ë¬¼ì„ ë§Œë“œëŠ”<br>
                    UXUI ë””ìì´ë„ˆ ê¹€ë¯¸í™”ì…ë‹ˆë‹¤.
                </p>
                <p>
                    html, css, figma, after effect ë“±ì„ ë‹¤ë£° ìˆ˜ ìˆìœ¼ë©°<br>
                    7ë…„ê°„ì˜ ê²Œì„ê°œë°œí†µí•´<br>
                    íŒ€ í”„ë¡œì íŠ¸ì— ê°•ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </div>
    </section>
    
    <section id="stage">
        
        <!-- P1 (500px) -->
        <div class="marionette-group p1">
            <div class="pendulum">
                <div class="string-rack" data-height="30vh" data-width="500px"></div>
                <div class="mockup-wrapper">
                    <img src="/img/mockup1.png" onerror="this.src='https://placehold.co/500x300/333/fff?text=Project+1+Mockup'" alt="Web Project" class="mockup-img">
                </div>
                <div class="info-bubbles">
                    <div class="bubble b-top-left"><h3>E-Commerce Platform</h3><p>ì‡¼í•‘ëª° ë¦¬ë‰´ì–¼ í”„ë¡œì íŠ¸</p></div>
                    <div class="bubble b-top-right"><p><strong>UIUX Designer</strong> / Figma</p></div>
                    <a href="#" class="bubble b-bottom-left" style="background: rgba(255,255,255,0.15);">ê¸°íšì„œ ë°”ë¡œê°€ê¸°</a>
                    <a href="#" class="bubble b-bottom-right" style="background: rgba(255,255,255,0.15);">ì›¹ ì‚¬ì´íŠ¸ ë°”ë¡œê°€ê¸°</a>
                </div>
            </div>
        </div>

        <!-- P2 (300px) -->
        <div class="marionette-group p2">
            <div class="pendulum">
                <div class="string-rack" data-height="15vh" data-width="300px"></div>
                <div class="mockup-wrapper">
                    <img src="/img/mockup2.png" onerror="this.src='https://placehold.co/300x500/555/fff?text=Project+2+Mockup'" alt="Mobile App" class="mockup-img">
                </div>
                <div class="info-bubbles">
                    <div class="bubble b-top-left"><h3>Wellio</h3><p>ê°€ì¡± ê±´ê°• ì»¤ë®¤ë‹ˆí‹° ì•±</p></div>
                    <div class="bubble b-top-right"><p><strong>UI/UX Designer</strong> / Figma</p></div>
                    <a href="#" class="bubble b-bottom-left">ê¸°íšì„œ ë°”ë¡œê°€ê¸°</a>
                    <a href="#" class="bubble b-bottom-right">ì•± ì‹¤í–‰í•´ë³´ê¸°</a>
                </div>
            </div>
        </div>

    </section>

    <section id="gallery-stage">
        <div class="gallery-bg">
            <img id="bg-img" src="https://placehold.co/1920x1080/111/111?text=%20" alt="Background" style="opacity: 1;">
            <div class="overlay"></div>
        </div>

        <!-- [NEW] ê°¤ëŸ¬ë¦¬ íƒ€ì´í‹€ ì¶”ê°€ -->
        <h2 class="gallery-title">Gallery</h2>

        <div class="gallery-content">
            <!-- ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€ë“¤ì€ ë¡œì»¬ ê²½ë¡œë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤. -->
            <div class="word-item" data-type="image" data-src="/img/p1.jpg">
                <img src="/img/p1.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P1'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p2.jpg">
                <img src="/img/p2.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P2'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p4.png">
                <img src="/img/p4.png" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P4+Character'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ê²Œì„ ìºë¦­í„° ë””ìì¸</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p3.jpg">
                <img src="/img/p3.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P3'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p5.jpg">
                <img src="/img/p5.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P5'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p6.jpg">
                <img src="/img/p6.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P6'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p8.png">
                <img src="/img/p8.png" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P8+Character'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ê°œì¸ ìºë¦­í„° ë””ìì¸</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p7.jpg">
                <img src="/img/p7.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P7'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788969021915.jpg">
                <img src="https://contents.kyobobook.co.kr/sih/fit-in/458x0/pdt/9788969021915.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Book+Illustration'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ë„ì„œ ì»¬ëŸ¬ ì‚½í™”</div>
            </div>
            <div class="word-item" data-type="image" data-src="/img/p10.jpg">
                <img src="/img/p10.jpg" onerror="this.src='https://placehold.co/400x250/333/fff?text=Art+P10'" alt="Thumbnail" class="thumbnail-img">
                <div class="thumbnail-caption">ì‹ ë¬¸ í‘ë°± ì‚½í™”</div>
            </div>
        </div>
    </section>

    <!-- ë³´ë„ˆìŠ¤ ì„¹ì…˜ (ìˆ˜ì •ë¨) -->
    <section id="bonus">
        <!-- ë°°ê²½ ì˜ìƒ -->
        <video autoplay loop muted playsinline class="bonus-bg-video">
            <source src="/img/mov.mp4" type="video/mp4">
        </video>
        <!-- ì˜¤ë²„ë ˆì´ ì‚­ì œë¨ -->
        
        <div class="bonus-content">
            <!-- í…ìŠ¤íŠ¸/ì´ë¯¸ì§€ ì‚­ì œë¨, ë²„íŠ¼ë§Œ ë‚¨ìŒ -->
            <a href="https://testtesttest-sigma.vercel.app/" class="bonus-btn">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸° â–¶</a>
        </div>
    </section>

    <footer>
        <div class="flex flex-col items-center gap-4">
            <img src="/img/qr.png" onerror="this.src='https://placehold.co/150x150/333/fff?text=QR+Code'" alt="Mobile View QR Code" class="w-32 h-32 rounded-lg shadow-lg">
            <p class="text-gray-400 text-sm tracking-widest uppercase">Mobile</p>
        </div>
    </footer>

    <div id="image-modal" class="fixed inset-0 z-50 hidden bg-black bg-opacity-90 flex items-center justify-center p-4" aria-modal="true" role="dialog">
        <div id="loading-spinner" class="text-white flex flex-col items-center">
            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-2 text-sm">ì½˜í…ì¸  ë¡œë”© ì¤‘...</p>
        </div>
        <div id="modal-content-wrapper" class="max-w-full max-h-full overflow-hidden flex justify-center items-center hidden">
            <img id="modal-image" src="" alt="ì „ì²´ í™”ë©´ ì´ë¯¸ì§€" class="max-w-full max-h-screen object-contain rounded-lg shadow-2xl transition-all duration-300 cursor-pointer">
        </div>
    </div>

    <script>
        gsap.registerPlugin(ScrollTrigger);

        ScrollTrigger.normalizeScroll(true); 
        ScrollTrigger.config({ ignoreMobileResize: true });
        
        // --- 0. Hero ìƒ‰ìƒ ì „í™˜ ë° Pin (ì¶”ê°€ëœ ë¶€ë¶„) ---
        // ì „ì—­ ë³€ìˆ˜ë¡œ ìŠ¤í¬ë¡¤ ìƒíƒœ ì¶”ì  (0: ì²˜ìŒ, 1: ì „í™˜ ì™„ë£Œ)
        let rainMode = 0; 
        let rainControl = { ratio: 1 }; // [NEW] Control object for rain quantity

        // íƒ€ì„ë¼ì¸ìœ¼ë¡œ ë³€ê²½í•˜ì—¬ ë°°ê²½ìƒ‰ ì „í™˜ê³¼ ìº”ë²„ìŠ¤ ì˜¤í¼ì‹œí‹° í˜ì´ë“œ ì•„ì›ƒì„ ì—°ê²°
        const heroTl = gsap.timeline({
            scrollTrigger: {
                trigger: "#hero",
                start: "top top",
                end: "+=4000", // ìŠ¤í¬ë¡¤ ê¸¸ì´ ëŠ˜ë¦¼ (2500 -> 4000)
                scrub: 0.5,
                pin: true, 
                onUpdate: (self) => {
                    rainMode = self.progress; 
                }
            }
        });

        // 1. ë°°ê²½ìƒ‰ì€ ì „ì²´ êµ¬ê°„ ë™ì•ˆ ì„œì„œíˆ #000000ìœ¼ë¡œ ë³€ê²½
        heroTl.to("#hero", { backgroundColor: "#000000", duration: 1 })
              // [ìˆ˜ì •ë¨] ë¡œí‹° ì• ë‹ˆë©”ì´ì…˜ ì‚¬ë¼ì§€ëŠ” ì†ë„ë¥¼ ëŠ¦ì¶¤ (duration: 0.1 -> 0.4, ì‹œì‘ì  0.2 -> 0.1)
              .to("lottie-player", { opacity: 0, autoAlpha: 0, duration: 0.4 }, 0.1)
              .to(rainControl, { ratio: 0, duration: 0.5 }, 0.5); // Decrease rain from 0.5 to 1.0
        
        // --- [NEW] ë§ˆë¦¬ì˜¤ë„¤íŠ¸ ì‹¤(ë¹„) íš¨ê³¼ ---
        const canvas = document.getElementById('rain-canvas');
        const ctx = canvas.getContext('2d');
        const portfolioChars = "PORTFOLIO".split(""); // Text pool
        
        let canvasWidth, canvasHeight;
        let rains = [];
        let texts = []; // Array for text drops
        
        function initRain() {
            canvasWidth = window.innerWidth;
            canvasHeight = window.innerHeight;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            
            rains = [];
            texts = []; // Reset text drops
            // í™”ë©´ ë„ˆë¹„ì— ë¹„ë¡€í•´ ë¹„ì˜ ì–‘ ì¡°ì ˆ (ë°€ë„)
            const rainCount = Math.floor(canvasWidth * 0.1); 
            const textCount = 15; // Number of falling text characters
            
            for(let i=0; i<rainCount; i++) {
                rains.push(new RainDrop());
            }
            
            for(let i=0; i<textCount; i++) {
                texts.push(new TextDrop());
            }
        }
        
        class RainDrop {
            constructor() {
                this.reset();
                // ì²˜ìŒ ìƒì„± ì‹œ í™”ë©´ ì „ì²´ì— ëœë¤ ë¶„í¬
                this.y = Math.random() * canvasHeight; 
            }
            
            reset() {
                this.x = Math.random() * canvasWidth;
                this.y = -Math.random() * 200; // í™”ë©´ ìœ„ì—ì„œ ì‹œì‘
                
                // ë§ˆë¦¬ì˜¤ë„¤íŠ¸ ì‹¤ ëŠë‚Œ: ê¸¸ì´ë¥¼ ê¸¸ê²Œ (100px ~ 300px)
                this.baseLength = Math.random() * 200 + 100; 
                
                // ì†ë„ ë³€ìˆ˜ (ëŠë¦¼ -> ë¹ ë¦„)
                this.slowSpeed = Math.random() * 0.5 + 0.2; // ëˆˆ(ì›)ì¼ ë•Œ ì†ë„
                this.fastSpeed = Math.random() * 2 + 1;     // ë¹„(ì„ )ì¼ ë•Œ ì†ë„
                
                this.opacity = Math.random() * 0.2 + 0.05; 
                
                // [NEW] Random pastel color for rain
                this.r = Math.floor(Math.random() * 100) + 155; // 155-255 for bright pastel
                this.g = Math.floor(Math.random() * 100) + 155;
                this.b = Math.floor(Math.random() * 100) + 155;
            }
            
            update() {
                // rainMode(0~1)ì— ë”°ë¼ ì†ë„ ë³´ê°„ (Interpolation)
                // 0ì— ê°€ê¹Œìš°ë©´ slowSpeed, 1ì— ê°€ê¹Œìš°ë©´ fastSpeed
                const currentSpeed = this.slowSpeed + (this.fastSpeed - this.slowSpeed) * rainMode;
                
                this.y += currentSpeed;
                
                // í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ë‹¤ì‹œ ìœ„ë¡œ
                if (this.y > canvasHeight) {
                    this.reset();
                }
            }
            
            draw(index, total) {
                ctx.beginPath();
                
                // [NEW] Fade out logic based on rainControl.ratio
                const minRain = 30;
                let fadeFactor = 1;

                if (index >= minRain) {
                    const countToFade = total - minRain;
                    // normalizedIndex: 0 (index=30) to 1 (index=total-1)
                    const normalizedIndex = (index - minRain) / countToFade;
                    
                    // As ratio decreases from 1 to 0, higher normalizedIndex fades first.
                    // 'distance' represents how far current ratio is above the item's threshold.
                    // Multiplier 5 makes the fade transition smoother but distinct.
                    const distance = rainControl.ratio - normalizedIndex;
                    fadeFactor = Math.max(0, Math.min(1, distance * 5));
                }

                // Apply fadeFactor to global opacity
                const currentOpacity = this.opacity * fadeFactor;
                
                // If invisible, skip drawing to save performance
                if (currentOpacity <= 0.01) return;
                
                // rainModeì— ë”°ë¼ ëª¨ì–‘ê³¼ ìƒ‰ìƒ ë³€í™”
                
                // 1. ê¸¸ì´: 0ì¼ ë•ŒëŠ” 0(ì›í˜•), 1ì¼ ë•ŒëŠ” baseLength(ì„ í˜•)
                // ì²˜ìŒì—” ë™ê·¸ë—ê²Œ ë³´ì´ê¸° ìœ„í•´ ê¸¸ì´ë¥¼ ê±°ì˜ 0ìœ¼ë¡œ ì‹œì‘
                const currentLength = this.baseLength * rainMode;
                
                // 2. ë‘ê»˜: 0ì¼ ë•ŒëŠ” ë‘ê»ê²Œ(ëˆˆ), 1ì¼ ë•ŒëŠ” ì–‡ê²Œ(ì‹¤)
                // ì‹œì‘: 4~6px (ë™ê·¸ë¼ë¯¸), ë: 0.5~2px (ì‹¤)
                const startWidth = 15;
                const endWidth = 1;
                const currentWidth = startWidth - (startWidth - endWidth) * rainMode;

                // 3. ìƒ‰ìƒ: use stored pastel RGB
                
                // ë‘¥ê·¼ ëì²˜ë¦¬ë¥¼ í•´ì•¼ ê¸¸ì´ê°€ 0ì¼ ë•Œ ì›ìœ¼ë¡œ ë³´ì„
                ctx.lineCap = 'round'; 
                
                ctx.moveTo(this.x, this.y);
                ctx.lineTo(this.x, this.y + currentLength);
                
                ctx.strokeStyle = `rgba(${this.r}, ${this.g}, ${this.b}, ${currentOpacity})`;
                ctx.lineWidth = currentWidth;
                ctx.stroke();
            }
        }

        class TextDrop {
            constructor() {
                this.reset();
                this.y = Math.random() * canvasHeight; // Random start y
            }

            reset() {
                this.x = Math.random() * canvasWidth;
                this.y = -Math.random() * 500; // Start higher up to stagger
                this.text = portfolioChars[Math.floor(Math.random() * portfolioChars.length)];
                this.fontSize = Math.floor(Math.random() * 50) + 50; // Modified to 50-100px

                // Same speed params as RainDrop for consistency
                this.slowSpeed = Math.random() * 0.5 + 0.2;
                this.fastSpeed = Math.random() * 2 + 1;
                this.opacity = Math.random() * 0.2 + 0.1; // Slightly more visible than rain
                
                // [NEW] Random pastel color generation
                this.r = Math.floor(Math.random() * 100) + 155; // 155-255 for bright pastel
                this.g = Math.floor(Math.random() * 100) + 155;
                this.b = Math.floor(Math.random() * 100) + 155;
            }

            update() {
                const currentSpeed = this.slowSpeed + (this.fastSpeed - this.slowSpeed) * rainMode;
                this.y += currentSpeed;

                if (this.y > canvasHeight + 150) { // Buffer for large text
                    this.reset();
                }
            }

            draw(index, total) {
                // Logic to keep some texts or fade all
                const minText = 3; 
                let fadeFactor = 1;

                if (index >= minText) {
                    const countToFade = total - minText;
                    const normalizedIndex = (index - minText) / countToFade;
                    const distance = rainControl.ratio - normalizedIndex;
                    fadeFactor = Math.max(0, Math.min(1, distance * 5));
                }
                
                // Scroll fade logic (activeOpacity) combined with sequential fade (fadeFactor)
                let activeOpacity = this.opacity * (1 - rainMode * 10);
                if (activeOpacity < 0) activeOpacity = 0;
                
                // Apply sequential fade
                activeOpacity *= fadeFactor;

                if (activeOpacity <= 0.01) return;

                // [NEW] Use stored random color with calculated opacity
                ctx.fillStyle = `rgba(${this.r}, ${this.g}, ${this.b}, ${activeOpacity})`;
                
                ctx.font = `bold ${this.fontSize}px sans-serif`;
                ctx.textAlign = 'center';
                ctx.fillText(this.text, this.x, this.y);
            }
        }
        
        function animateRain() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            
            // Loop all, pass index and total
            rains.forEach((rain, i) => {
                rain.update();
                rain.draw(i, rains.length);
            });
            
            texts.forEach((text, i) => {
                text.update();
                text.draw(i, texts.length);
            });
            
            requestAnimationFrame(animateRain);
        }
        
        window.addEventListener('resize', initRain);
        initRain();
        animateRain();
        // -------------------------------------

        // [NEW] Function to randomize bubble colors
        function colorizeBubbles() {
            const bubbles = document.querySelectorAll('.info-bubbles .bubble');
            bubbles.forEach(bubble => {
                // Only style if it doesn't have an inline background already set in HTML (though we can override)
                // The prompt asks to change the bubbles to random pastel colors.
                // Currently some have style="background: ..." inline. 
                // We'll override or set it.
                
                const r = Math.floor(Math.random() * 100) + 100; // 100-200 range, slightly darker than rain for visibility on white text
                const g = Math.floor(Math.random() * 100) + 100;
                const b = Math.floor(Math.random() * 100) + 100;
                
                // Set background with some transparency
                bubble.style.background = `rgba(${r}, ${g}, ${b}, 0.5)`;
                bubble.style.border = `1px solid rgba(${r}, ${g}, ${b}, 0.8)`;
            });
        }
        // Call immediately
        colorizeBubbles();

        // [NEW] Setup random hover border color for gallery items
        function setupGalleryItems() {
            const items = document.querySelectorAll('.word-item');
            items.forEach(item => {
                const r = Math.floor(Math.random() * 100) + 155;
                const g = Math.floor(Math.random() * 100) + 155;
                const b = Math.floor(Math.random() * 100) + 155;
                item.style.setProperty('--hover-border-color', `rgba(${r}, ${g}, ${b}, 0.8)`);
                item.style.setProperty('--hover-color', `rgba(${r}, ${g}, ${b}, 0.8)`);
            });
        }
        setupGalleryItems();

        // [NEW] Trigger for strings when half visible
        ScrollTrigger.create({
            trigger: "#about",
            start: "top 60%",
            onEnter: () => document.getElementById('about').classList.add('strings-active'),
            onLeaveBack: () => document.getElementById('about').classList.remove('strings-active')
        });

        // Main Pin Trigger for About
        ScrollTrigger.create({
            trigger: "#about",
            start: "top top",
            end: "+=3000",
            pin: true,
            scrub: true, // Scrub is true for whatever timeline I might use, but here I might not need a timeline for opacity if using callbacks.
                         // But I need to pin. ScrollTrigger can pin without a timeline.
            onEnter: () => {
                document.querySelector('.about-content').classList.add('content-active');
            },
            onLeaveBack: () => {
                document.querySelector('.about-content').classList.remove('content-active');
            },
            onLeave: () => {
                 // Fade out strings when scroll finishes (moves to next section)
                 gsap.to(".about-strings", { opacity: 0, duration: 1 });
            },
            onEnterBack: () => {
                 // Restore opacity if user scrolls back up into the section
                 gsap.to(".about-strings", { opacity: 1, duration: 0.5 });
            }
        });

        // --- 1. ë§ˆë¦¬ì˜¤ë„¤íŠ¸ ë¡œì§ ---
        function createBalancedStrings() {
            const racks = document.querySelectorAll('.string-rack');
            const zones = [{ min: 5, max: 20 }, { min: 30, max: 45 }, { min: 55, max: 70 }, { min: 80, max: 95 }];

            racks.forEach(rack => {
                rack.innerHTML = ''; 
                const isMobile = window.innerWidth <= 768;
                
                if (isMobile) {
                    rack.style.width = '30vw'; 
                    rack.style.maxWidth = 'none';
                } else {
                    rack.style.width = rack.dataset.width; 
                    rack.style.maxWidth = 'none'; 
                    rack.style.height = rack.dataset.height; 
                }

                zones.forEach(zone => {
                    const string = document.createElement('div');
                    string.classList.add('string');
                    const randomLeft = Math.floor(Math.random() * (zone.max - zone.min + 1)) + zone.min;
                    string.style.left = `${randomLeft}%`;
                    const minOp = 0.10; const maxOp = 0.40;
                    const op = (Math.random() * (maxOp - minOp) + minOp).toFixed(2);
                    string.style.background = `rgba(255, 255, 255, ${op})`;
                    string.style.boxShadow = `0 0 ${op * 2}px rgba(255, 255, 255, ${op * 0.3})`;
                    rack.appendChild(string);
                });
            });
        }
        
        createBalancedStrings();
        window.addEventListener('resize', () => { createBalancedStrings(); });


        // --- 2. ë§ˆë¦¬ì˜¤ë„¤íŠ¸ íƒ€ì„ë¼ì¸ (ìˆ˜ì •ë¨: P3 ê´€ë ¨ ì• ë‹ˆë©”ì´ì…˜ ì œê±° ë° ê¸¸ì´ ì¡°ì •) ---
        const tl = gsap.timeline({
            // [ìˆ˜ì •ë¨] í”„ë¡œì íŠ¸ í•˜ë‚˜ê°€ ì¤„ì–´ë“¤ì—ˆìœ¼ë¯€ë¡œ ìŠ¤í¬ë¡¤ ê¸¸ì´ ë‹¨ì¶• (8000 -> 5500)
            scrollTrigger: { trigger: "#stage", start: "top top", end: "+=5500", pin: true, scrub: 1 }
        });

        gsap.set(".marionette-group", { autoAlpha: 0 }); 
        gsap.set(".bubble", { y: 30, autoAlpha: 0 }); 

        const isMobile = window.innerWidth <= 768;
        const startX_Right = isMobile ? 0 : "35vw";
        const startX_Left = isMobile ? 0 : "-35vw";
        
        tl.fromTo(".p1", { x: startX_Right, scale: 0.5, filter: "blur(10px)", autoAlpha: 0 }, { x: "0%", scale: 1, filter: "blur(0px)", autoAlpha: 1, duration: 5, ease: "power1.out" })
            .to(".p1 .bubble", { autoAlpha: 1, y: 0, duration: 1, stagger: 0.15, ease: "back.out(1.7)" })
            .to({}, { duration: 3 }) 
            .to(".p1 .bubble", { autoAlpha: 0, y: -30, duration: 0.5, stagger: 0.05 })
            .to(".p1", { scale: 5, autoAlpha: 0, filter: "blur(20px)", duration: 3 })
            
            .fromTo(".p2", { x: startX_Left, scale: 0.5, filter: "blur(10px)", autoAlpha: 0 }, { x: "0%", scale: 1, filter: "blur(0px)", autoAlpha: 1, duration: 5, ease: "power1.out" })
            .to(".p2 .bubble", { autoAlpha: 1, y: 0, duration: 1, stagger: 0.15, ease: "back.out(1.7)" })
            .to({}, { duration: 3 })
            .to(".p2 .bubble", { autoAlpha: 0, y: -30, duration: 0.5, stagger: 0.05 })
            .to(".p2", { scale: 5, autoAlpha: 0, filter: "blur(20px)", duration: 3 });
            
            // [ìˆ˜ì •ë¨] P3 ì• ë‹ˆë©”ì´ì…˜ ì‚­ì œë¨


        // --- 3. ë¬¼ë¦¬ ì—”ì§„ (Ticker) ---
        const groups = document.querySelectorAll(".marionette-group");
        const CONFIG = { TENSION: 0.04, FRICTION: 0.85, FORCE: 0.015, MAX_ANGLE: 3 }; 

        groups.forEach(group => {
            const pendulum = group.querySelector(".pendulum");
            let rotation = 0; let velocity = 0; let prevX = null;
            
            gsap.ticker.add(() => {
                const currentX = group.getBoundingClientRect().left;
                if (prevX === null || Math.abs(currentX) > 10000) { prevX = currentX; return; }
                const dx = currentX - prevX;
                const opacity = window.getComputedStyle(group).opacity;
                
                if (Math.abs(dx) < 50 && opacity > 0.1) { 
                    velocity += dx * CONFIG.FORCE; velocity += -rotation * CONFIG.TENSION; velocity *= CONFIG.FRICTION; rotation += velocity;
                    if (rotation > CONFIG.MAX_ANGLE) rotation = CONFIG.MAX_ANGLE;
                    if (rotation < -CONFIG.MAX_ANGLE) rotation = -CONFIG.MAX_ANGLE;
                    if (Math.abs(rotation) < 0.01 && Math.abs(velocity) < 0.01) { rotation = 0; velocity = 0; }
                } else { velocity = 0; }
                
                const xPercent = window.innerWidth <= 768 ? 0 : -50;
                gsap.set(pendulum, { xPercent: xPercent, rotation: rotation });
                prevX = currentX;
            });
        });


        // --- 4. ê°¤ëŸ¬ë¦¬ ì„¹ì…˜ ë¡œì§ ---
        const items = document.querySelectorAll(".word-item");
        const STAGGER_AMOUNT = 0.08; 
        let interactionTimer; 

        // [ìˆ˜ì •ëœ ë¶€ë¶„] ê°¤ëŸ¬ë¦¬ ì•„ì´í…œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        items.forEach((item, index) => {
            const src = item.dataset.src;
            
            // í˜¸ë²„ ì‹œ ë°°ê²½ ì „í™˜ + íƒ€ì´í‹€ ì˜êµ¬ ìˆ¨ê¹€
            item.addEventListener("mouseenter", () => { 
                updateGalleryBackground(src);
                
                // ê°¤ëŸ¬ë¦¬ íƒ€ì´í‹€ ìˆ¨ê¹€ (ë‹¤ì‹œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ëŠ” ì½”ë“œë¥¼ ì œê±°í•˜ì—¬ ì˜êµ¬ì ìœ¼ë¡œ ì‚¬ë¼ì§)
                gsap.to(".gallery-title", { autoAlpha: 0, duration: 0.3, overwrite: true });
            });
            
            // mouseleave ì´ë²¤íŠ¸ì—ì„œ íƒ€ì´í‹€ì„ ë³µêµ¬í•˜ëŠ” ì½”ë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤.
            // ìº¡ì…˜ í…ìŠ¤íŠ¸ë¥¼ ìˆ¨ê¸°ëŠ” ì½”ë“œë„ ì œê±°í–ˆìŠµë‹ˆë‹¤ (CSS ê¸°ë³¸ í˜¸ë²„ íš¨ê³¼ ìœ ì§€).

            item.addEventListener("click", () => { openModal(src); });
        });

        // (ê¸°ì¡´ ìŠ¤í¬ë¡¤ íŠ¸ë¦¬ê±° ê´€ë ¨ ì½”ë“œ ìœ ì§€)
        items.forEach((item, index) => {
            item.style.setProperty('--item-delay', `${index * STAGGER_AMOUNT}s`);
        });
        
        ScrollTrigger.create({
            trigger: "#gallery-stage",
            start: "top top",
            end: "+=1500", 
            pin: true,
            scrub: true 
        });

        ScrollTrigger.create({
            trigger: "#gallery-stage",
            start: "top 60%", 
            onEnter: () => {
                items.forEach(item => item.classList.add('is-active'));
                
                clearTimeout(interactionTimer);
                interactionTimer = setTimeout(() => {
                    items.forEach(item => item.classList.add('interaction-ready'));
                }, 500); // [ìˆ˜ì •ë¨] ì¸í„°ë™ì…˜ í™œì„±í™” ì‹œê°„ 2000 -> 500msë¡œ ë‹¨ì¶•í•˜ì—¬ ë¹ ë¥¸ í˜¸ë²„ ê°€ëŠ¥í•˜ê²Œ í•¨
            },
            onLeaveBack: () => {
                items.forEach(item => {
                    item.classList.remove('is-active');
                    item.classList.remove('interaction-ready');
                });
                clearTimeout(interactionTimer);
            },
            toggleActions: "play none none reverse"
        });

        // (3) ëª¨ë‹¬ ë° ë°°ê²½ ë¡œì§
        const galleryBgImg = document.getElementById("bg-img");
        const modal = document.getElementById('image-modal');
        const modalContentWrapper = document.getElementById('modal-content-wrapper');
        const loadingSpinner = document.getElementById('loading-spinner');
        const modalImage = document.getElementById('modal-image');

        const updateGalleryBackground = (src) => {
             if (galleryBgImg.src.includes(src)) { return; }
             gsap.killTweensOf(galleryBgImg);
             gsap.to(galleryBgImg, { 
                 opacity: 0, duration: 0.2, filter: 'blur(5px)', // [ìˆ˜ì •ë¨] 0.3s -> 0.2s
                 onComplete: () => {
                     galleryBgImg.src = src;
                     gsap.to(galleryBgImg, { opacity: 1, duration: 0.4, filter: 'blur(0px)' }); // [ìˆ˜ì •ë¨] 0.7s -> 0.4s
             }});
        };

        const closeModal = () => {
            modalContentWrapper.classList.remove('modal-enter-active');
            modal.classList.add('hidden');
            modalImage.src = ''; 
        };
        
        const openModal = (src) => {
            modal.classList.remove('hidden');
            loadingSpinner.classList.remove('hidden');
            modalContentWrapper.classList.add('hidden');
            modalImage.style.display = 'none';

            const tempImg = new Image();
            tempImg.onload = () => {
                modalImage.src = src;
                modalImage.style.display = 'block';
                loadingSpinner.classList.add('hidden');
                modalContentWrapper.classList.remove('hidden');
                modalContentWrapper.classList.add('modal-enter-active');
            };
            tempImg.onerror = () => {
                loadingSpinner.classList.add('hidden');
                closeModal();
            };
            tempImg.src = src;
        };

        // (ì´ ë¶€ë¶„ ì¤‘ë³µ ì œê±°: ìœ„ì—ì„œ forEachë¡œ ì´ë¯¸ ì¶”ê°€í•¨)
        // items.forEach(item => { ... }); 

        modalImage.addEventListener('click', closeModal); 
        modal.addEventListener('click', (e) => { if (e.target === modal) closeModal(); });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && !modal.classList.contains('hidden')) closeModal(); });

        // [NEW] About Section - Dynamic Random Strings
        function createAboutStrings() {
            const container = document.querySelector('.about-strings');
            container.innerHTML = ''; // Clear static elements
            
            const stringCount = 10; // Number of strings

            for (let i = 0; i < stringCount; i++) {
                const str = document.createElement('div');
                str.classList.add('about-string');
                
                // Random left position (0% - 100%)
                str.style.left = Math.random() * 100 + '%';
                
                // Random Color with low opacity (Pastel-ish or randomized RGB)
                const r = Math.floor(Math.random() * 155) + 100; // 100-255 (lighter)
                const g = Math.floor(Math.random() * 155) + 100;
                const b = Math.floor(Math.random() * 155) + 100;
                
                // [Modified] Random opacity between 0.1 and 0.5
                const opacity = (Math.random() * 0.4 + 0.1).toFixed(2); 
                str.style.background = `rgba(${r}, ${g}, ${b}, ${opacity})`; 
                
                // Random animation delay (0s - 1s) for staggered effect
                str.style.transitionDelay = Math.random() * 1 + 's';
                
                container.appendChild(str);
            }
        }
        createAboutStrings();
        
        // [NEW] Background color transition for bonus section
        // [REMOVED] Trigger removal requested.
        
        // Background image fade out
        // [REMOVED] Trigger removal requested.

        // [NEW] Bonus Section Pinning
        // [REMOVED] Pinning removal requested.

    </script>
</body>
</html>